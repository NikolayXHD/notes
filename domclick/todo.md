[ ] испробовать лемматизатор mystem

---

# 1. Подготовка датасета

## Запрос в базу
Отбираем объявления о продаже квартиры (offers.offers) за 2023г, январь 
-- начало апреля

  модель загружена 7 апреля
  http://mleco.stat.sberned.ru/model/322/evaluation/2

Label - moderation_errors->'extra'->>'reason' 

Положилельные примеры
```
#     AND (moderation_errors->'extra'->>'reason') IN
#         ('Объект является новостройкой',
#          'Новостройка в разделе вторички',
#          'Переуступка запрещена')
```
Отрицательные примеры
```
#     AND status NOT IN (7, 27)
#     AND moderation_errors is null
```

TODO status NOT IN (7, 27)

## Тестовые выборки
```
train 0.8
test  0.1
val   0.1
```

## Предобработка

Убираем препинания из текста
Упоминания года заменяем на токены PAST/CURRENT/FUTURE ..._YEAR

Сегментация natasha
Морфология pymorphy2

Отбросить примеры с пустым множеством токенов после токенизации

# 2. Обучение векторизатора

Fasttext

Что делаем с векторами
1. Для каждого слова в предложении нормализуем
2. По словам преложения
   - Берём среднее
   - Берём максимум (почему минимум не берём)
   - конкатенируем

Поиск гиперпараметров

optuna

- Максимизируем roc_auc лассификатора xboost с дефолтными параметрами поверх
  векторов

# 3. Обучение классификатора

xgboost

Подбор гиперпараметров
optuna, максимизируем f1

# 4. Валидация

Почистили валидационный набор данных в excel
